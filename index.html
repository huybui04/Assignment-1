<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div>
        <!-- Tab items -->
        <div class="tabs">
            <div class="tab-item active">
                <i class="tab-icon fas fa-code"></i>
                Phương pháp nội suy Newton
            </div>
            <div class="tab-item">
                <i class="tab-icon fas fa-cog"></i>
                Phương pháp nội suy Lagrange
            </div>
            <div class="tab-item">
                <i class="tab-icon fas fa-plus-circle"></i>
                Phương pháp hình thang
            </div>
            <div class="tab-item">
                <i class="tab-icon fas fa-plus-circle"></i>
                Phương pháp Simpson
            </div>
            <div class="tab-item">
                <i class="tab-icon fas fa-cog"></i>
                Phương pháp chia đôi
            </div>
            <div class="tab-item">
                <i class="tab-icon fas fa-code"></i>
                Phương pháp lặp
            </div>
            <div class="line"></div>
            <div class="tab-item">
                <i class="tab-icon fas fa-code"></i>
                Phương pháp dây cung
            </div>
            <div class="line"></div>
        </div>
      
        <!-- Tab content -->
        <div class="tab-content">
            <div class="tab-pane active">
               <form action="" class="dataform active">
                    <table class="method">
                        <tr>
                            <td class="F active">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập n</td>
                            <td>
                                <input type="text" class="N active">
                                <input type="button" value="Send" onclick="creatTable()">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập a</td>
                            <td>
                                <input type="text" class="newtonA">
                                <input type="button" value="Solve" onclick="newtonMethod()">
                            </td>
                        </tr>
                        <tr>
                            <td>Kết quả </td>
                            <td>
                                <div class="result"></div>
                            </td>
                        </tr>
                    </table>
               </form>
            </div>

            <div class="tab-pane">
                <form action="" class="dataform">
                    <table class="method">
                        <tr>
                            <td class="F">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập n</td>
                            <td>
                                <input type="text" class="N">
                                <input type="button" value="Send" onclick="creatTable()">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập a</td>
                            <td>
                                <input type="text" class="lagrangeA">
                                <input type="button" value="Solve" onclick="lagrangeMethod()">
                            </td>
                        </tr>
                        <tr>
                            <td>Kết quả </td>
                            <td>
                                <div class="result"></div>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
      
            <div class="tab-pane">
                <div class="dataform">
                    <table class="method">
                        <tr>
                            <td>Nhập f(x)</td>
                            <td>
                                <input type="text" class="F">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập a</td>
                            <td>
                                <input type="text" class="trapezoidA">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập b</td>
                            <td>
                                <input type="text" class="trapezoidB">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập n</td>
                            <td>
                                <input type="text" class="N">
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <input type="button" value="Solve" class="method-btn" onclick="trapezoidMethod()">
                            </td>
                        </tr>
                        <tr>
                            <td>Kết quả </td>
                            <td>
                                <div class="result"></div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
      
            <div class="tab-pane">
                <form action="" class="dataform">
                    <table class="method">
                        <tr>
                            <td>Nhập f(x)</td>
                            <td>
                                <input type="text" class="F">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập a</td>
                            <td>
                                <input type="text" class="simpsonA">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập b</td>
                            <td>
                                <input type="text" class="simpsonB">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập n</td>
                            <td>
                                <input type="text" class="N">
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <input type="button" value="Solve" class="method-btn" onclick="simpsonMethod()">
                            </td>
                        </tr>
                        <tr>
                            <td>Kết quả </td>
                            <td>
                                <div class="result"></div>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>

            <div class="tab-pane">
                <form action="" class="dataform">
                    <table class="method">
                        <tr>
                            <td>Nhập f(x)</td>
                            <td>
                                <input type="text" class="F">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập a</td>
                            <td>
                                <input type="text" class="bisectionA">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập b</td>
                            <td>
                                <input type="text" class="bisectionB">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập e</td>
                            <td>
                                <input type="text" class="N">
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <input type="button" value="Solve" class="method-btn" onclick="bisectionMethod()">
                            </td>
                        </tr>
                        <tr>
                            <td>Kết quả </td>
                            <td>
                                <div class="result"></div>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
            <div class="tab-pane">
                <form action="" class="dataform">
                    <table class="method">
                        <tr>
                            <td>Nhập f(x)</td>
                            <td>
                                <input type="text" class="F">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập x0</td>
                            <td>
                                <input type="text" class="iterationX0">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập q</td>
                            <td>
                                <input type="text" class="iterationQ">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập e</td>
                            <td>
                                <input type="text" class="N">
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <input type="button" value="Solve" class="method-btn" onclick="iterationMethod()">
                            </td>
                        </tr>
                        <tr>
                            <td>Kết quả </td>
                            <td>
                                <div class="result"></div>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
            <div class="tab-pane">
                <form action="" class="dataform">
                    <table class="method">
                        <tr>
                            <td>Nhập f(x)</td>
                            <td>
                                <input type="text" class="F">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập a</td>
                            <td>
                                <input type="text" class="secantA">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập b</td>
                            <td>
                                <input type="text" class="secantB">
                            </td>
                        </tr>
                        <tr>
                            <td>Nhập e</td>
                            <td>
                                <input type="text" class="N">
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <input type="button" value="Solve" class="method-btn" onclick="secantMethod()">
                            </td>
                        </tr>
                        <tr>
                            <td>Kết quả </td>
                            <td>
                                <div class="result"></div>
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
    </div>

    <script>
        
        const $ = document.querySelector.bind(document);
        const $$ = document.querySelectorAll.bind(document);

        const tabs = $$(".tab-item");
        const panes = $$(".tab-pane");
        const dataforms = $$(".dataform");
        const fActives  = $$(".F");
        const nActives  = $$(".N");

        const tabActive = $(".tab-item.active");
        const line = $(".tabs .line");

        requestIdleCallback(function () {
        line.style.left = tabActive.offsetLeft + "px";
        line.style.width = tabActive.offsetWidth + "px";
        });

        tabs.forEach((tab, index) => {
            const pane = panes[index];
            const dataform = dataforms[index];
            const fActive = fActives[index];
            const nActive = nActives[index];

            tab.onclick = function() {
                $('.tab-item.active').classList.remove('active')
                $('.tab-pane.active').classList.remove('active')
                $('.dataform.active').classList.remove('active')
                $('.F.active').classList.remove('active')
                $('.N.active').classList.remove('active')

                line.style.left = this.offsetLeft + "px";
                line.style.width = this.offsetWidth + "px";

                this.classList.add('active')
                pane.classList.add('active')
                dataform.classList.add('active')
                fActive.classList.add('active')
                nActive.classList.add('active')
            }
        });
        // Fx
        function f(x) {
            fstring = document.getElementsByClassName("F active")[0].value;
            var source="(function() {return "+fstring+";})"
            with(Math){
                var f = eval(source);
                var v = f();
            }
            return v;
        }
        // Hình thang
        function trapezoidMethod() {
            var a = parseFloat(document.getElementsByClassName("trapezoidA")[0].value);
            var b = parseFloat(document.getElementsByClassName("trapezoidB")[0].value);
            var n = parseFloat(document.getElementsByClassName("N active")[0].value);
            var h = (b-a)/n;
            var s = f(a) + f(b);

            try 
            {
                if (document.getElementsByClassName("trapezoidA")[0].value == "" ||
                    document.getElementsByClassName("trapezoidB")[0].value == "" ||
                    document.getElementsByClassName("N active")[0].value == "" ||
                    document.getElementsByClassName("F active")[0].value == "") throw "Nhập thiếu";
                if (isNaN(document.getElementsByClassName("trapezoidA")[0].value)||
                    isNaN(document.getElementsByClassName("trapezoidB")[0].value)||
                    isNaN(document.getElementsByClassName("N active")[0].value)) throw "Không hợp lệ";
            }
            catch(err)
            {
                document.getElementsByClassName("result")[2].innerHTML = err;
                return;
            }

            for (i=1;i<n;i++)
            {
                var x = a + i*h;
                s += 2*f(x);
            }
            s = (h/2)*s;

            document.getElementsByClassName("result")[2].innerHTML = s;
        }
        // Simpson
        function simpsonMethod() {
            var a = parseFloat(document.getElementsByClassName("simpsonA")[0].value);
            var b = parseFloat(document.getElementsByClassName("simpsonB")[0].value);
            var n = parseFloat(document.getElementsByClassName("N active")[0].value);
            var h = (b-a)/n;
            var s = f(a) + f(b);

            try 
            {
                if (document.getElementsByClassName("simpsonA")[0].value == "" ||
                    document.getElementsByClassName("simpsonB")[0].value == "" ||
                    document.getElementsByClassName("N active")[0].value == "" ||
                    document.getElementsByClassName("F active")[0].value == "") throw "Nhập thiếu";
                if (isNaN(document.getElementsByClassName("trapezoidA")[0].value)||
                    isNaN(document.getElementsByClassName("trapezoidB")[0].value)||
                    isNaN(document.getElementsByClassName("N active")[0].value)) throw "Không hợp lệ";
            }
            catch(err)
            {
                document.getElementsByClassName("result")[3].innerHTML = err;
                return;
            }

            for (i=1;i<n;i++)
            {
                var x = a + i*h;
                s += 2*f(x);
                if (i%2!=0) s+= 2*f(x);
            }
            s = (h/3)*s;

            document.getElementsByClassName("result")[3].innerHTML = s;
        }
        // CreateTable
        function creatTable() {
            
            var n = parseInt(document.getElementsByClassName("N active")[0].value);
            var tagForm = document.getElementsByClassName("dataform active")[0];
            var tagTable = document.createElement("table");

		    tagTable.border = 1;
            
            try 
            {
                if (document.getElementsByClassName("N active")[0].value == "" ) throw "Nhập thiếu";
                if (isNaN(document.getElementsByClassName("N active")[0].value)) throw "Không hợp lệ";
            }
            catch(err)
            {
                document.getElementsByClassName("result")[0].innerHTML = err;
                document.getElementsByClassName("result")[1].innerHTML = err;
                return;
            }

            for (i=0;i<n; i++) 
            {
                var tagRow = document.createElement("tr");
                tagTable.appendChild(tagRow);
            
                for(j=0;j<2;j++) {
                var tagColumn = document.createElement("td");
                // var textNode = document.createTextNode(i + "-" + j);
				// tagColumn.appendChild(textNode);
				tagRow.appendChild(tagColumn);
                var tagInput = document.createElement("input");
                tagInput.setAttribute("class",String(i)+"-"+String(j));
                tagColumn.appendChild(tagInput);
                }
            }

            tagForm.appendChild(tagTable);
        }   
        // Newton
        function newtonMethod() {
            var n = parseInt(document.getElementsByClassName("N active")[0].value);
            var a = parseFloat(document.getElementsByClassName("newtonA")[0].value);
            var D = [];
            var inPutsX = [], inPutsY = [];   

            try 
            {
                if (document.getElementsByClassName("newtonA")[0].value == "" ||
                    document.getElementsByClassName("N active")[0].value == "" ) throw "Nhập thiếu";
                if (isNaN(document.getElementsByClassName("newtonA")[0].value)||
                    isNaN(document.getElementsByClassName("N active")[0].value)) throw "Không hợp lệ";
            }
            catch(err)
            {
                document.getElementsByClassName("result")[0].innerHTML = err;
                return;
            }

            for (i=0;i<n;i++)
            {
                inPutsX[i] = parseFloat(document.getElementsByClassName(String(i)+"-"+String(0))[0].value);
                inPutsY[i] = parseFloat(document.getElementsByClassName(String(i)+"-"+String(1))[0].value);
            }
            
            for (i=0;i<n-1;i++)
            {
                D[i] = (inPutsY[i+1]-inPutsY[i])/(inPutsX[i+1]-inPutsX[i]);
            }
            var S = inPutsY[0] + D[0]*(a-inPutsX[0]);
            var T = (a-inPutsX[0]);
            var P = 1;
            for (j=2;j<n;j++)
            {
                for (i=0;i<n-j;i++)
                {
                    D[i] = (D[i+1]-D[i])/(inPutsX[i+j]-inPutsX[i]);
                }
                T *= (a-inPutsX[j-1]); 
                P *= D[0]*T; 
                S += P;
            }

            document.getElementsByClassName("result")[0].innerHTML = S;
        }
        // Lagrange
        function lagrangeMethod() {
            var n = parseInt(document.getElementsByClassName("N active")[0].value);
            var a = parseFloat(document.getElementsByClassName("lagrangeA")[0].value);
            var inPutsX = [], inPutsY = [];
            var S = 0;

            for (i=0;i<n;i++)
            {
                    inPutsX[i] = parseFloat(document.getElementsByClassName(String(i)+"-"+String(0))[0].value);
                    inPutsY[i] = parseFloat(document.getElementsByClassName(String(i)+"-"+String(1))[0].value);
            }

            for (k=0;k<n;k++)
            {
                var d=1;
                for (i=0;i<n;i++)
                {
                    if (i!=k) d = d*(a-inPutsX[i])/(inPutsX[k]-inPutsX[i]);
                }
                S += inPutsY[k]*d;
            }
            document.getElementsByClassName("result")[1].innerHTML = S;
        }
        // Bisection
        function bisectionMethod() {
            var a = parseFloat(document.getElementsByClassName("bisectionA")[0].value);
            var b = parseFloat(document.getElementsByClassName("bisectionB")[0].value);
            var e = parseFloat(document.getElementsByClassName("N active")[0].value);

            try 
            {
                if (document.getElementsByClassName("bisectionA")[0].value == "" ||
                    document.getElementsByClassName("bisectionB")[0].value == "" ||
                    document.getElementsByClassName("N active")[0].value == "" ||
                    document.getElementsByClassName("F active")[0].value == "") throw "Nhập thiếu";
                if (isNaN(document.getElementsByClassName("bisectionA")[0].value)||
                    isNaN(document.getElementsByClassName("bisectionB")[0].value)||
                    isNaN(document.getElementsByClassName("N active")[0].value)) throw "Không hợp lệ";
            }
            catch(err)
            {
                document.getElementsByClassName("result")[4].innerHTML = err;
                return;
            }

            do
            {
                var x = (a+b)/2;
                var fa = f(a);
                var fx = f(x);
                if (fa*fx>0) a = x;	
                else b = x;	
            } while (b-a>=e);
            document.getElementsByClassName("result")[4].innerHTML = x;
        }
        // Iteration
        function iterationMethod() {
            var x0 = parseFloat(document.getElementsByClassName("iterationX0")[0].value);
            var q = parseFloat(document.getElementsByClassName("iterationQ")[0].value);
            var e = parseFloat(document.getElementsByClassName("N active")[0].value);
            var ERR = 0;
            var x = 0;

            try 
            {
                if (document.getElementsByClassName("iterationX0")[0].value == "" ||
                    document.getElementsByClassName("iterationQ")[0].value == "" ||
                    document.getElementsByClassName("N active")[0].value == "" ||
                    document.getElementsByClassName("F active")[0].value == "") throw "Nhập thiếu";
                if (isNaN(document.getElementsByClassName("iterationX0")[0].value)||
                    isNaN(document.getElementsByClassName("iterationQ")[0].value)||
                    isNaN(document.getElementsByClassName("N active")[0].value)) throw "Không hợp lệ";
            }
            catch(err)
            {
                document.getElementsByClassName("result")[5].innerHTML = err;
                return;
            }

            do
            {
                x = f(x0);
                ERR = Math.abs(x-x0);
                x0 = x;
            } while (ERR>=e*(1-q)/q);
            document.getElementsByClassName("result")[5].innerHTML = x;
        }
        // Secant
        function secantMethod() {
            var a = parseFloat(document.getElementsByClassName("secantA")[0].value);
            var b = parseFloat(document.getElementsByClassName("secantB")[0].value);
            var e = parseFloat(document.getElementsByClassName("N active")[0].value);
            var ERR = 0;
            var x = 0;
            var i = 0;

            try 
            {
                if (document.getElementsByClassName("secantA")[0].value == "" ||
                    document.getElementsByClassName("secantB")[0].value == "" ||
                    document.getElementsByClassName("N active")[0].value == "" ||
                    document.getElementsByClassName("F active")[0].value == "") throw "Nhập thiếu";
                if (isNaN(document.getElementsByClassName("secantA")[0].value)||
                    isNaN(document.getElementsByClassName("secantB")[0].value)||
                    isNaN(document.getElementsByClassName("N active")[0].value)) throw "Không hợp lệ";
            }
            catch(err)
            {
                document.getElementsByClassName("result")[6].innerHTML = err;
                return;
            }

            do
            {
                x = (a*f(b)-b*f(a))/(f(b)-f(a));
                if (f(a)*f(x)<0) b = x;
                else a = x;
                ERR = b-a;
                i++;
            } while (ERR>=e);
            document.getElementsByClassName("result")[6].innerHTML = x;
        }
    </script>

</body>
</html>


